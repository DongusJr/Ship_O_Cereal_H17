{% extends "base_page.html" %}
{% block content %}
<link rel="stylesheet" href="../static/css/single_product_style.css">

<div id="mainProductDiv">
    <div id="ProductImages">
        <div id="largeProductImage">
            place holder for a large image
        </div>
        <div id="smallProductImages">
        {% for product_image in product.productimage_set.all %}
        <div class="singleProductImageDiv">
            <img src="{{ product_image.image }}" alt="A product image" class="singleProductImage"/>
        </div>
        {% endfor %}
        </div>
    </div>
    <div id="ProductInfoDiv">
        <div id="CartProdInfo">
            {% include 'proto_products/proto_quantity_counter.html' %}
            <!--<input type="submit" name="add" class="btn btn-primary" value="Add to cart" href="{% url 'product_detail' product.id %}"></input>-->

        </div>
        <div id="ProductInfo">
            <h1>{{ product.name }}</h1>
            <p>{{ product.description }}</p>
            <p>{{ product.description }}</p>
            <p>{{ product.price }}</p>
            <p>{{ product.category }}</p>
            <p>{{ product.manufacturer}}</p>

        </div>

    <!-- VG: IDK  why cant we just always se the add to cart
    {% if user.is_authenticated%}
        <a type="submit" name="add" class="btn btn-primary" value="Add to cart" href="{% url 'product_detail' product.id %}">Add to cart</a>
    {% endif %}
    {% if success %}
        <p>Added to cart</p>
    {% endif %}
    -->
        <div id="ProductRatingInfo">
            <!--{#{% load Rating = round(3.5*2)/2 %}#}-->

            {% if rating < 1 %}
                <img src="../static/images/empty_bowl.svg" alt="0">
            {% else %}
                {% if rating == 1 %}
                    <img src="../static/images/half_bowl.svg" alt="0.5">
                {% else %}
                    <img src="../static/images/full_bowl.svg" alt="1">
                {% endif %}
            {% endif %}

            {% if rating < 3 %}
                <img src="../static/images/empty_bowl.svg" alt="0">
            {% else %}
                {% if rating == 3 %}
                    <img src="../static/images/half_bowl.svg" alt="0.5">
                {% else %}
                    <img src="../static/images/full_bowl.svg" alt="1">
                {% endif %}
            {% endif %}

            {% if rating < 5 %}
                <img src="../static/images/empty_bowl.svg" alt="0">
            {% else %}
                {% if rating == 5 %}
                    <img src="../static/images/half_bowl.svg" alt="0.5">
                {% else %}
                    <img src="../static/images/full_bowl.svg" alt="1">
                {% endif %}
            {% endif %}

            {% if rating < 7 %}
                <img src="../static/images/empty_bowl.svg" alt="0">
            {% else %}
                {% if rating == 7 %}
                    <img src="../static/images/half_bowl.svg" alt="0.5">
                {% else %}
                    <img src="../static/images/full_bowl.svg" alt="1">
                {% endif %}
            {% endif %}

            {% if rating < 9 %}
                <img src="../static/images/empty_bowl.svg" alt="0">
            {% else %}
                {% if rating == 9 %}
                    <img src="../static/images/half_bowl.svg" alt="0.5">
                {% else %}
                    <img src="../static/images/full_bowl.svg" alt="1">
                {% endif %}
            {% endif %}

        </div>
    </div>
    <div id="ProductNutrDiv">
        <div id="servings">
            <div>
                <img src="../static/images/servings_bowl.svg" alt="bowls">
            </div>
            <p>14<!--{{ product.nutritional_info.servings }}--> </p>
        </div>
        <div id="ProductFancyNutrDiv">
            <div class="fancyNutrDiv">energy<div class="fancyInfo">{{ product.nutritional_info.energy }} </div> </div>
            <div class="fancyNutrDiv">sugar<div class="fancyInfo">{{ product.nutritional_info.sugar }}g </div> </div>
            <div class="fancyNutrDiv">fat<div class="fancyInfo">{{ product.nutritional_info.fat }} </div> </div>
            <div class="fancyNutrDiv">saturates<div class="fancyInfo"> {{ product.nutritional_info.saturates }} </div> </div>

        </div>

    </div>
</div>
{% if user.is_authenticated %}
<h1>Write a review</h1>
<form method="post">
    {% csrf_token %}
    <label>Write a review: </label>
    <input type="text" id="review" name="review"><br><br>
    <label>Leave a Rating</label>
    <input type="number" name="rating"><br><br>
    <input type="submit" value="Submit">
</form>
{% endif %}
<div class="reviews">
    {% if reviews %}
        {% for review in reviews %}
            {% include 'proto_review/proto_single_review.html' %}
        {% endfor %}
    {% else %}
        <p>No reviews</p>
    {% endif %}
</div>
{% endblock %}
